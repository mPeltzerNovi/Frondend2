[{"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\index.js":"1","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\App.js":"2","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\reportWebVitals.js":"3","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\Profile.js":"4","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\components\\Header.js":"5","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\SignUp.js":"6","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\Home.js":"7","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\SignIn.js":"8","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\context\\AuthContext.js":"9","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\components\\Button.js":"10"},{"size":712,"mtime":1611403709698,"results":"11","hashOfConfig":"12"},{"size":1106,"mtime":1611837754987,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1611394352871,"results":"14","hashOfConfig":"12"},{"size":5636,"mtime":1613122035942,"results":"15","hashOfConfig":"12"},{"size":1215,"mtime":1611915116244,"results":"16","hashOfConfig":"12"},{"size":3582,"mtime":1612451178468,"results":"17","hashOfConfig":"12"},{"size":634,"mtime":1612517255714,"results":"18","hashOfConfig":"12"},{"size":2847,"mtime":1612519046292,"results":"19","hashOfConfig":"12"},{"size":4669,"mtime":1613121340331,"results":"20","hashOfConfig":"12"},{"size":223,"mtime":1611570277576,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"8fj4un",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"24"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"24"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\index.js",[],["47","48"],"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\App.js",[],"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\reportWebVitals.js",[],"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\Profile.js",["49","50","51","52"],"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\components\\Header.js",["53"],"import React, { useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Button from './Button';\nimport {AuthContext, useAuthState} from \"../context/AuthContext\";\n\n\n\nfunction Header() {\n  const history = useHistory();\n\n  //context dingen\n\n  const { isAuthenticated } = useAuthState();\n  const { logout } = useContext(AuthContext);\n\n  //useEffect(() => {\n  //  if (isAuthenticated === false) {\n  //    history.push('/signin');\n  //  }\n  //}, [isAuthenticated]);\n\n  return (\n    <header>\n      <div>\n        <Button>\n          Hallo daar!\n        </Button>\n\n\n        {isAuthenticated ? (\n            <button\n                type=\"button\"\n                onClick={() => logout()}\n            >\n              Log uit\n            </button>\n        ) : (\n            <>\n            <button\n                type=\"button\"\n                onClick={() => history.push('/signin')}\n            >\n              Log in\n            </button>\n            <button\n                type=\"button\"\n                onClick={() => history.push('/signup')}\n            >\n              Registreren\n            </button>\n            </>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\SignUp.js",[],"C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\Home.js",["54"],"import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuthState} from \"../context/AuthContext\";\n\nfunction Home() {\n    const { isAuthenticated } = useAuthState();\n\n  return (\n    <>\n      <h1>Homepagina</h1>\n      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab alias cum debitis dolor dolore fuga id molestias qui quo unde?</p>\n      <p>Als je ingelogd bent, bekijk dan de <Link to=\"/profile\">Profielpagina</Link></p>\n      <p>Je kunt ook <Link to=\"/signin\">inloggen</Link> of jezelf <Link to=\"/signup\">registeren</Link> als je nog geen account hebt.</p>\n    </>\n  );\n}\n\nexport default Home;","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\pages\\SignIn.js",["55","56"],"import React, { useState, useContext, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport axios from \"axios\";\nimport {AuthContext, useAuthState} from \"../context/AuthContext\";\n\n//const endpointlink = `https://polar-lake-14365.herokuapp.com/api/auth/signin`;\nconst endpointlink = `http://localhost8080/api/auth/signin`;\n\nfunction SignIn() {\n  //context-functie\n  const { login } = useContext(AuthContext);\n  const { isAuthenticated } = useAuthState();\n\n  //state voor invoervelden (omdat het formulier met controlled components werkt!)\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n\n  //state voor gebruikersfeedback\n  const [loading, toggleLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  //react-router dingen\n  const history = useHistory();\n\n  useEffect(() => {\n    if (isAuthenticated === true) {\n      history.push('/profile');\n    }\n  }, [isAuthenticated]);\n\n\n\n  async function onSubmit(event) {\n    toggleLoading(true);\n    setError('');\n    //Deze hoeft alleen als je controlled components gebruikt\n    event.preventDefault();\n\n    try {\n      //const response = await axios.post('https://polar-lake-14365.herokuapp.com/api/auth/signup', {\n      const response = await axios.post(`http://localhost:8080/api/auth/signin`, {\n        username: username,\n        password: password,\n      })\n\n      //handel het \"inloggen\" aan de voorkant af in de contect met de data die we binnen hebben gekregen!\n      login(response.data);\n    } catch (e) {\n      console.log(e);\n      setError('Inloggen is mislukt');\n      // Tip: als de gebruikersnaam niet bestaat of wachtwoord is verkeerd, stuurt de backend een 401\n    }\n    toggleLoading(false);\n\n  }\n\n  return (\n    <>\n      <h1>Inloggen</h1>\n      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab alias cum debitis dolor dolore fuga id molestias qui quo unde?</p>\n\n      <form onSubmit={onSubmit}>\n        <label htmlFor=\"username-field\">\n          Gebruikersnaam:\n          <input\n            type=\"text\"\n            id=\"username-field\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </label>\n\n        <label htmlFor=\"password-field\">\n          Wachtwoord:\n          <input\n            type=\"password\"\n            id=\"password-field\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)} />\n        </label>\n\n\n\n        <button\n            type=\"submit\"\n            className=\"form-button\"\n            disabled={loading}\n        >\n          {loading ? 'Loading...' : 'Maak account aan'}\n        </button>\n        {error && <p>{error}</p>}\n      </form>\n      <p>Heb je nog geen account? <Link to=\"/signup\">Registreer</Link> je dan eerst.</p>\n    </>\n  );\n}\n\nexport default SignIn;","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\context\\AuthContext.js",["57","58"],"import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nconst AuthContext = createContext({});\r\n\r\nfunction AuthContextProvider({ children }) {\r\n    const  [authState, setAuthState] = useState({\r\n        status: 'pending',\r\n        error: null,\r\n        user: null,\r\n    })\r\n\r\n    useEffect(() => {\r\n        //haal uit de local storage de JWT Token ->Stap 9 Nova (allerlaatste stap, in de context)\r\n        //Als die er niet is, kunnen we gewoon verder\r\n        //Als die token er wel is, dan betekend dat dat de applicatie herstart is //applicatie is herstart waardoor contex is leeggegooid\r\n        //En dan willen we nog even onze gebruikersdata (username, etc.) (opnieuw) ophalen. Met een request\r\n\r\n        const token = localStorage.getItem('token');\r\n\r\n        async function getUserInfo() {\r\n            try {\r\n                //We kunnen de gebruikersdata ophalen omdat we onszelf authenticeren met de token\r\n                    const response = await axios.get('http://localhost:8080/api/test/user', {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            Authorization: `Bearer ${token}`,\r\n                        },\r\n                    }\r\n                );\r\n\r\n                console.log(response);\r\n\r\n                //met het resultaat vullen we de context\r\n                setAuthState({\r\n                    ...authState,\r\n                    user: {\r\n                        id: response.id,\r\n                        username: response.username,\r\n                        email: response.email,\r\n                    },\r\n                    status: 'done',\r\n                });\r\n\r\n            }catch (e) {\r\n                //Gaat er toch iets mis? Dan zetten we de error in de context\r\n                setAuthState({\r\n                    ...authState,\r\n                    user: null,\r\n                    error: e,\r\n                    status: 'done',\r\n                });\r\n            }\r\n        }\r\n\r\n        //Als we GEEN userinformatie meer in de applicatie hebben, maar er staat WEL een token in\r\n        //local storage, gaan we handmatig de gebruikersdata ophalen door de getUserInfo functie van hierboven aan te roepen\r\n        if (authState.user === null && token) {\r\n            getUserInfo();\r\n        } else {\r\n            //Als er geen ingelogde gebruiker hoeft te zijn, zetten we de context naar de basis state\r\n            setAuthState({\r\n                ...authState,\r\n                error: null,\r\n                user: null,\r\n                status: 'done',\r\n            });\r\n        }\r\n\r\n    }, []);\r\n\r\n    function login(data) {\r\n        //1. de token willen we in de local storage zetten\r\n        localStorage.setItem('token', data.accessToken);\r\n\r\n        //2. de user-informatie willen we in de context zetten\r\n        setAuthState({\r\n            ...authState,\r\n            user: {\r\n                username: data.username,\r\n                email: data.email,\r\n                roles: data.roles,\r\n            }\r\n        })\r\n\r\n\r\n        //3. als dat allemaal gelukt is, willen we doorgelinkt worden naar de profielpagina!\r\n        //DIt doen we in het component dat deze functie aanroept zelf!\r\n    }\r\n\r\n    function logout() {\r\n        //1. Maak local storage leeg\r\n        localStorage.clear();\r\n        //2. Haal user uit de context state\r\n        setAuthState({\r\n            ...authState,\r\n            user: null,\r\n        })\r\n    }\r\n\r\n    //als je hem helemaal uit zou schrijven en als variabele mee zou geven aan AuthContext.Provider:\r\n    //const porviderData = {\r\n    //    ...authState,\r\n    //    login: login,\r\n    //    logout: logout,\r\n    //};\r\n\r\n\r\n    return(\r\n      <AuthContext.Provider value={{ ...authState, login, logout }}>\r\n          {authState.status === 'done' && children}\r\n          {authState.status === 'pending' && <p>Loading...</p>}\r\n      </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nfunction useAuthState() {\r\n    const authState = useContext(AuthContext);\r\n\r\n    //iemand is geauthoriseerd wanneer de status === 'done'\r\n    //en als er een gebruiker in de authState staat\r\n    const isDone = authState.status == 'done';\r\n    const isAuthenticated = authState.user !== null && isDone;\r\n\r\n    //console.log('Ik ben authenticated:', isAuthenticated);\r\n\r\n    return {\r\n        ...authState,\r\n        isAuthenticated: isAuthenticated,\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport {\r\n    AuthContext,\r\n    useAuthState,\r\n    AuthContextProvider,\r\n}\r\n\r\n\r\n//We willen in de context bijhouden of we op dit moment:\r\n//gebruikersdata hebben\r\n//of de gebruiker geauthoriseerd is om data te mogen bekijken","C:\\Users\\mpelt\\IdeaProjects\\Basisversie form van Nova\\frontend-react-authentication-bootcamp-demo\\src\\components\\Button.js",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","severity":1,"message":"64","line":19,"column":12,"nodeType":"65","messageId":"66","endLine":19,"endColumn":30},{"ruleId":"67","severity":1,"message":"68","line":87,"column":8,"nodeType":"69","endLine":87,"endColumn":10,"suggestions":"70"},{"ruleId":"67","severity":1,"message":"68","line":119,"column":8,"nodeType":"69","endLine":119,"endColumn":10,"suggestions":"71"},{"ruleId":"72","severity":1,"message":"73","line":134,"column":62,"nodeType":"74","endLine":136,"endColumn":34},{"ruleId":"63","severity":1,"message":"75","line":1,"column":29,"nodeType":"65","messageId":"66","endLine":1,"endColumn":38},{"ruleId":"63","severity":1,"message":"76","line":6,"column":13,"nodeType":"65","messageId":"66","endLine":6,"endColumn":28},{"ruleId":"63","severity":1,"message":"77","line":7,"column":7,"nodeType":"65","messageId":"66","endLine":7,"endColumn":19},{"ruleId":"67","severity":1,"message":"78","line":30,"column":6,"nodeType":"69","endLine":30,"endColumn":23,"suggestions":"79"},{"ruleId":"67","severity":1,"message":"80","line":71,"column":8,"nodeType":"69","endLine":71,"endColumn":10,"suggestions":"81"},{"ruleId":"82","severity":1,"message":"83","line":123,"column":37,"nodeType":"84","messageId":"85","endLine":123,"endColumn":39},"no-native-reassign",["86"],"no-negated-in-lhs",["87"],"no-unused-vars","'protectedAdminData' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'user.roles'. Either include it or remove the dependency array.","ArrayExpression",["88"],["89"],"react/jsx-no-comment-textnodes","Comments inside children section of tag should be placed inside braces","Literal","'useEffect' is defined but never used.","'isAuthenticated' is assigned a value but never used.","'endpointlink' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["90"],"React Hook useEffect has a missing dependency: 'authState'. Either include it or remove the dependency array. You can also do a functional update 'setAuthState(a => ...)' if you only need 'authState' in the 'setAuthState' call.",["91"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-global-assign","no-unsafe-negation",{"desc":"92","fix":"93"},{"desc":"92","fix":"94"},{"desc":"95","fix":"96"},{"desc":"97","fix":"98"},"Update the dependencies array to be: [user.roles]",{"range":"99","text":"100"},{"range":"101","text":"100"},"Update the dependencies array to be: [history, isAuthenticated]",{"range":"102","text":"103"},"Update the dependencies array to be: [authState]",{"range":"104","text":"105"},[3534,3536],"[user.roles]",[4924,4926],[952,969],"[history, isAuthenticated]",[2662,2664],"[authState]"]